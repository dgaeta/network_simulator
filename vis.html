<!DOCTYPE html>
<html>
    <head>
        <title>NB Conflict Res</title>
    </head>
    <body>
        <div id="container"></div>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
        <script>
            
            function Network(levels) {
                this.nodes = {};
                this.levels = levels;
            }


            function Router(id, circle) {
                this.id = id;
                this.figure = circle;
                this.forwarding_table = {};
                this.pending_table = {};
                this.color = 'blue';
            }


            function draw_network(paper, network) {
                var x_origin, y_origin, radius = 250,
                    250, 100;
                var circle = paper.circle(x_origin, y_origin, 25).attr({
                    stroke: "blue",
                    'stroke-width': 3
                });
                network.nodes[0] = circle;
                _draw_network(network, network.levels, 0, radius, x_origin, y_origin);
            }

            function _draw_network(paper, network, level, i, r, x, y) {
               
                if (level == 0) {

                    //center
                    var circle = paper.circle(x, y, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 1] = new Router(7 * i + 1, circle);
                    _draw_network(paper, network, level - 1, 7 * i + 1, r / 3, x, y);

                    //north
                    var circle = paper.circle(x, y - 2 * r, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 2] = new Router(7 * i + 2, circle);
                    _draw_network(paper, network, level - 1, 7 * i + 2, r / 3, x, y - 2 * r);

                    //south 
                    var circle = paper.circle(x, y + 2 * r, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 3] = new Router(7 * i + 3, circle);
                    _draw_network(paper, network, level - 1, 7 * i + 3, r / 3, x, y + 2 * r);

                    //northeast 
                    var circle = paper.circle(x + 2 * r * Math.sqrt(3) / 2, y - r, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 4] = new Router(7 * i + 4, circle);
                    _draw_network(paper, network, level - 1, 7 * i + 4, r / 3, x + 2 * r * Math.sqrt(3) / 2, y - r);

                    //southeast 
                    var circle = paper.circle(x + 2 * r * Math.sqrt(3) / 2, y + r, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 5] = new Router(7 * i + 1, circle);
                    _draw_network(paper, network, level - 1, 7 * i + 5, 5r / 3, x + 2 * r * Math.sqrt(3) / 2, y + r);

                    //northwest 
                    var circle = paper.circle(x - 2 * r * Math.sqrt(3) / 2, y - r, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 6] = new Router(7 * i + 6, circle);
                    _draw_network(paper, network, level - 1, 7 * i + 6, r / 3, x - 2 * r * Math.sqrt(3) / 2, y - r);

                    //southwest 
                    var circle = paper.circle(x - 2 * r * Math.sqrt(3) / 2, y + r, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 7] = new Router(7 * i + 7, circle);
                    _draw_network(paper, network, level - 1, 7 * i + 7, r / 3, x - 2 * r * Math.sqrt(3) / 2, y + r);

                } else {

                    //center
                    var circle = paper.circle(x, y, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 1] = new Router(7 * i + 1, circle);

                    //north
                    var circle = paper.circle(x, y - 2 * r, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 2] = new Router(7 * i + 2, circle);

                    //south 
                    var circle = paper.circle(x, y + 2 * r, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 3] = new Router(7 * i + 3, circle);

                    //northeast 
                    var circle = paper.circle(x + 2 * r * Math.sqrt(3) / 2, y - r, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 4] = new Router(7 * i + 4, circle);

                    //southeast 
                    var circle = paper.circle(x + 2 * r * Math.sqrt(3) / 2, y + r, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 5] = new Router(7 * i + 5, circle);

                    //northwest 
                    var circle = paper.circle(x - 2 * r * Math.sqrt(3) / 2, y - r, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 6] = new Router(7 * i + 6, circle);

                    //southwest 
                    var circle = paper.circle(x - 2 * r * Math.sqrt(3) / 2, y + r, r).attr({
                        stroke: "blue",
                        'stroke-width': 3
                    });
                    network.nodes[7 * i + 7] = new Router(7 * i + 7, circle);

                }

            }

            var paper = Raphael("container", 1000, 1000);
            var net = new Network(3);
        </script>
    </body>
</html>
            